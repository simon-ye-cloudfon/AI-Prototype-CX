<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent - 聊天会话</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .chat-container {
            max-height: 70vh;
            overflow-y: auto;
        }
        .user-message {
            background-color: #e9f5ff;
            border-radius: 18px 18px 0 18px;
        }
        .agent-message {
            background-color: #f0f0f0;
            border-radius: 18px 18px 18px 0;
        }
        .message-time {
            font-size: 11px;
        }
        .agent-avatar {
            background-color: #3b82f6;
        }
        .user-avatar {
            background-color: #10b981;
        }
        .steps-badge {
            background-color: #e0f2fe;
            color: #0369a1;
        }
        .time-badge {
            background-color: #f1f5f9;
            color: #64748b;
        }
        .view-details-btn {
            background-color: #f1f5f9;
            color: #475569;
            transition: all 0.2s;
        }
        .view-details-btn:hover {
            background-color: #e2e8f0;
        }
        .reply-button {
            background-color: #0ea5e9;
            color: white;
            transition: all 0.2s;
        }
        .reply-button:hover {
            background-color: #0284c7;
        }
        .secondary-button {
            background-color: #f1f5f9;
            color: #475569;
            transition: all 0.2s;
        }
        .secondary-button:hover {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center">
                <a href="workflow-log.html" class="text-blue-600 hover:text-blue-800 mr-2">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <h1 class="text-2xl font-bold text-gray-800">AI Agent - ABC Airlines</h1>
                <span class="ml-3 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">5 records</span>
                <span class="ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">40s</span>
            </div>
            <div>
                <span class="text-sm text-gray-500">AI Cluster Node Start</span>
                <span class="ml-2 text-sm text-gray-700">2025/07/12 11:57:18</span>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="chat-container mb-6">
                <!-- 用户消息 1 -->
                <div class="flex items-start mb-4">
                    <div class="flex-shrink-0 w-10 h-10 rounded-full user-avatar flex items-center justify-center text-white font-bold mr-3">
                        PP
                    </div>
                    <div class="flex flex-col max-w-md">
                        <div class="flex items-center mb-1">
                            <span class="font-medium text-gray-800 mr-2">Peter Pan</span>
                            <span class="text-gray-500 message-time">17:48</span>
                        </div>
                        <div class="user-message p-3 mb-1">
                            <p>Can you help me to check my ticket?</p>
                        </div>
                        <div class="flex justify-end">
                            <button class="p-1 text-gray-400 hover:text-gray-600">
                                <i class="far fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- AI回复 1 -->
                <div class="flex items-start mb-4 justify-end">
                    <div class="flex flex-col items-end max-w-md">
                        <div class="flex items-center mb-1">
                            <span class="text-gray-500 message-time mr-2">17:48</span>
                            <span class="font-medium text-gray-800">ABC Airlines</span>
                        </div>
                        <div class="agent-message p-3 mb-1">
                            <p>Sure, could you tell me your phone number?</p>
                        </div>
                        <div class="flex space-x-2 mt-1">
                            <span class="steps-badge text-xs px-2 py-1 rounded-full">4 steps</span>
                            <span class="time-badge text-xs px-2 py-1 rounded-full">2.5s</span>
                            <button class="view-details-btn text-xs px-2 py-1 rounded-full hover:bg-gray-200">View details</button>
                        </div>
                    </div>
                    <div class="flex-shrink-0 w-10 h-10 rounded-full agent-avatar flex items-center justify-center text-white font-bold ml-3">
                        <i class="fas fa-headset"></i>
                    </div>
                </div>

                <!-- 用户消息 2 -->
                <div class="flex items-start mb-4">
                    <div class="flex-shrink-0 w-10 h-10 rounded-full user-avatar flex items-center justify-center text-white font-bold mr-3">
                        PP
                    </div>
                    <div class="flex flex-col max-w-md">
                        <div class="flex items-center mb-1">
                            <span class="font-medium text-gray-800 mr-2">Peter Pan</span>
                            <span class="text-gray-500 message-time">17:48</span>
                        </div>
                        <div class="user-message p-3 mb-1">
                            <p>My phone number is 8888888888888</p>
                        </div>
                        <div class="flex justify-end">
                            <button class="p-1 text-gray-400 hover:text-gray-600">
                                <i class="far fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- AI回复 2 -->
                <div class="flex items-start mb-4 justify-end">
                    <div class="flex flex-col items-end max-w-md">
                        <div class="flex items-center mb-1">
                            <span class="text-gray-500 message-time mr-2">17:48</span>
                            <span class="font-medium text-gray-800">ABC Airlines</span>
                        </div>
                        <div class="agent-message p-3 mb-1">
                            <p>Your flight will depart from Gate 22, Terminal T1 at 21:18 on July 26, 2025. Please prepare your relevant documents and items, and arrive at the airport 2 hours in advance to check in for the flight.</p>
                        </div>
                        <div class="flex space-x-2 mt-1">
                            <span class="steps-badge text-xs px-2 py-1 rounded-full">4 steps</span>
                            <span class="time-badge text-xs px-2 py-1 rounded-full">2.5s</span>
                            <button class="view-details-btn text-xs px-2 py-1 rounded-full hover:bg-gray-200">View details</button>
                        </div>
                    </div>
                    <div class="flex-shrink-0 w-10 h-10 rounded-full agent-avatar flex items-center justify-center text-white font-bold ml-3">
                        <i class="fas fa-headset"></i>
                    </div>
                </div>
            </div>

            <!-- 回复按钮区域 -->
            <div class="border-t pt-4">
                <h3 class="text-red-500 font-medium mb-3">End with reply button</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <button class="reply-button py-2 px-4 rounded-md text-center font-medium">
                        That's help
                    </button>
                    <button class="secondary-button py-2 px-4 rounded-md text-center font-medium">
                        Need more help
                    </button>
                    <button class="secondary-button py-2 px-4 rounded-md text-center font-medium">
                        Want to have a Call
                    </button>
                </div>
                <div class="mt-4 text-sm text-gray-500">
                    Route by User Feedback to "That Helped" Branch
                </div>
                <div class="mt-2 text-sm text-gray-500">
                    AI Cluster Node Ended &nbsp;&nbsp; 2025/07/12 11:57:58
                </div>
            </div>
        </div>
    </div>

    <!-- AI生成内容详情模态窗口 (暂时隐藏，将来实现) -->
    <div id="ai-details-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="border-b px-6 py-4 flex items-center justify-between">
                <h3 class="text-lg font-medium text-gray-900">AI生成内容详细步骤</h3>
                <button id="close-modal" class="text-gray-400 hover:text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="mb-6">
                    <h4 class="font-medium text-gray-700 mb-2">生成摘要</h4>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-gray-800">用户询问航班信息，AI检索到相关数据并生成了回复。</p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h4 class="font-medium text-gray-700 mb-2">生成步骤</h4>
                    <div class="space-y-4">
                        <!-- 步骤1 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center mb-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full mr-2">步骤 1</span>
                                <h5 class="font-medium text-gray-800">意图识别</h5>
                            </div>
                            <p class="text-gray-700 mb-2">识别用户意图为：查询航班信息</p>
                            <p class="text-gray-500 text-sm">处理时间：35ms</p>
                        </div>
                        
                        <!-- 步骤2 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center mb-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full mr-2">步骤 2</span>
                                <h5 class="font-medium text-gray-800">实体提取</h5>
                            </div>
                            <p class="text-gray-700 mb-2">提取实体：电话号码 = 8888888888888</p>
                            <p class="text-gray-500 text-sm">处理时间：28ms</p>
                        </div>
                        
                        <!-- 步骤3 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center mb-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full mr-2">步骤 3</span>
                                <h5 class="font-medium text-gray-800">数据检索</h5>
                            </div>
                            <p class="text-gray-700 mb-2">检索航班数据：ABC123，出发时间：21:18，日期：2025-07-26</p>
                            <p class="text-gray-500 text-sm">处理时间：42ms</p>
                        </div>
                        
                        <!-- 步骤4 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center mb-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full mr-2">步骤 4</span>
                                <h5 class="font-medium text-gray-800">回复生成</h5>
                            </div>
                            <p class="text-gray-700 mb-2">生成回复内容，包含航班信息和登机提示</p>
                            <p class="text-gray-500 text-sm">处理时间：15ms</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-medium text-gray-700 mb-2">总处理时间</h4>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-gray-800">总计：120ms</p>
                    </div>
                </div>
            </div>
            <div class="border-t px-6 py-4 flex justify-end">
                <button id="close-modal-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors">
                    关闭
                </button>
            </div>
        </div>
    </div>

    <script src="js/ai-chat-session.js"></script>
</body>
</html>